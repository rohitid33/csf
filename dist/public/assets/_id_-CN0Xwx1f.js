import{c as je,h as Q,r as u,a1 as $,j as e,a2 as Y,P,l as W,k as we,u as Z,o as Ne,a3 as ye,R as g,i as Ae,q,a4 as Ie,z as Re,x as Se,a5 as Pe,Z as ke,B as I,a as R,b as S,Y as _e,a6 as Ee,a7 as De}from"./index-B3yLkj_P.js";import{T as Te,a as Oe,b as k,c as _}from"./tabs-C-rN83Db.js";import{D as Le,a as Me,b as $e,c as qe,d as He,e as Be}from"./dialog-D6CLHQOt.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=je("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var H="Collapsible",[Fe,X]=Q(H),[Ue,B]=Fe(H),ee=u.forwardRef((t,s)=>{const{__scopeCollapsible:o,open:a,defaultOpen:i,disabled:c,onOpenChange:l,...d}=t,[p=!1,m]=$({prop:a,defaultProp:i,onChange:l});return e.jsx(Ue,{scope:o,disabled:c,contentId:Y(),open:p,onOpenToggle:u.useCallback(()=>m(f=>!f),[m]),children:e.jsx(P.div,{"data-state":F(p),"data-disabled":c?"":void 0,...d,ref:s})})});ee.displayName=H;var te="CollapsibleTrigger",oe=u.forwardRef((t,s)=>{const{__scopeCollapsible:o,...a}=t,i=B(te,o);return e.jsx(P.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":F(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...a,ref:s,onClick:W(t.onClick,i.onOpenToggle)})});oe.displayName=te;var V="CollapsibleContent",se=u.forwardRef((t,s)=>{const{forceMount:o,...a}=t,i=B(V,t.__scopeCollapsible);return e.jsx(we,{present:o||i.open,children:({present:c})=>e.jsx(ze,{...a,ref:s,present:c})})});se.displayName=V;var ze=u.forwardRef((t,s)=>{const{__scopeCollapsible:o,present:a,children:i,...c}=t,l=B(V,o),[d,p]=u.useState(a),m=u.useRef(null),f=Z(s,m),x=u.useRef(0),w=x.current,b=u.useRef(0),N=b.current,v=l.open||d,C=u.useRef(v),r=u.useRef();return u.useEffect(()=>{const n=requestAnimationFrame(()=>C.current=!1);return()=>cancelAnimationFrame(n)},[]),Ne(()=>{const n=m.current;if(n){r.current=r.current||{transitionDuration:n.style.transitionDuration,animationName:n.style.animationName},n.style.transitionDuration="0s",n.style.animationName="none";const h=n.getBoundingClientRect();x.current=h.height,b.current=h.width,C.current||(n.style.transitionDuration=r.current.transitionDuration,n.style.animationName=r.current.animationName),p(a)}},[l.open,a]),e.jsx(P.div,{"data-state":F(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!v,...c,ref:f,style:{"--radix-collapsible-content-height":w?`${w}px`:void 0,"--radix-collapsible-content-width":N?`${N}px`:void 0,...t.style},children:v&&i})});function F(t){return t?"open":"closed"}var Ge=ee,Ke=oe,Je=se,j="Accordion",Qe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[U,Ye,We]=ye(j),[D,mt]=Q(j,[We,X]),z=X(),ae=g.forwardRef((t,s)=>{const{type:o,...a}=t,i=a,c=a;return e.jsx(U.Provider,{scope:t.__scopeAccordion,children:o==="multiple"?e.jsx(tt,{...c,ref:s}):e.jsx(et,{...i,ref:s})})});ae.displayName=j;var[re,Ze]=D(j),[ne,Xe]=D(j,{collapsible:!1}),et=g.forwardRef((t,s)=>{const{value:o,defaultValue:a,onValueChange:i=()=>{},collapsible:c=!1,...l}=t,[d,p]=$({prop:o,defaultProp:a,onChange:i});return e.jsx(re,{scope:t.__scopeAccordion,value:d?[d]:[],onItemOpen:p,onItemClose:g.useCallback(()=>c&&p(""),[c,p]),children:e.jsx(ne,{scope:t.__scopeAccordion,collapsible:c,children:e.jsx(ie,{...l,ref:s})})})}),tt=g.forwardRef((t,s)=>{const{value:o,defaultValue:a,onValueChange:i=()=>{},...c}=t,[l=[],d]=$({prop:o,defaultProp:a,onChange:i}),p=g.useCallback(f=>d((x=[])=>[...x,f]),[d]),m=g.useCallback(f=>d((x=[])=>x.filter(w=>w!==f)),[d]);return e.jsx(re,{scope:t.__scopeAccordion,value:l,onItemOpen:p,onItemClose:m,children:e.jsx(ne,{scope:t.__scopeAccordion,collapsible:!0,children:e.jsx(ie,{...c,ref:s})})})}),[ot,T]=D(j),ie=g.forwardRef((t,s)=>{const{__scopeAccordion:o,disabled:a,dir:i,orientation:c="vertical",...l}=t,d=g.useRef(null),p=Z(d,s),m=Ye(o),x=Ae(i)==="ltr",w=W(t.onKeyDown,b=>{var K;if(!Qe.includes(b.key))return;const N=b.target,v=m().filter(L=>{var J;return!((J=L.ref.current)!=null&&J.disabled)}),C=v.findIndex(L=>L.ref.current===N),r=v.length;if(C===-1)return;b.preventDefault();let n=C;const h=0,y=r-1,A=()=>{n=C+1,n>y&&(n=h)},O=()=>{n=C-1,n<h&&(n=y)};switch(b.key){case"Home":n=h;break;case"End":n=y;break;case"ArrowRight":c==="horizontal"&&(x?A():O());break;case"ArrowDown":c==="vertical"&&A();break;case"ArrowLeft":c==="horizontal"&&(x?O():A());break;case"ArrowUp":c==="vertical"&&O();break}const Ce=n%r;(K=v[Ce].ref.current)==null||K.focus()});return e.jsx(ot,{scope:o,disabled:a,direction:i,orientation:c,children:e.jsx(U.Slot,{scope:o,children:e.jsx(P.div,{...l,"data-orientation":c,ref:p,onKeyDown:a?void 0:w})})})}),E="AccordionItem",[st,G]=D(E),ce=g.forwardRef((t,s)=>{const{__scopeAccordion:o,value:a,...i}=t,c=T(E,o),l=Ze(E,o),d=z(o),p=Y(),m=a&&l.value.includes(a)||!1,f=c.disabled||t.disabled;return e.jsx(st,{scope:o,open:m,disabled:f,triggerId:p,children:e.jsx(Ge,{"data-orientation":c.orientation,"data-state":xe(m),...d,...i,ref:s,disabled:f,open:m,onOpenChange:x=>{x?l.onItemOpen(a):l.onItemClose(a)}})})});ce.displayName=E;var le="AccordionHeader",de=g.forwardRef((t,s)=>{const{__scopeAccordion:o,...a}=t,i=T(j,o),c=G(le,o);return e.jsx(P.h3,{"data-orientation":i.orientation,"data-state":xe(c.open),"data-disabled":c.disabled?"":void 0,...a,ref:s})});de.displayName=le;var M="AccordionTrigger",pe=g.forwardRef((t,s)=>{const{__scopeAccordion:o,...a}=t,i=T(j,o),c=G(M,o),l=Xe(M,o),d=z(o);return e.jsx(U.ItemSlot,{scope:o,children:e.jsx(Ke,{"aria-disabled":c.open&&!l.collapsible||void 0,"data-orientation":i.orientation,id:c.triggerId,...d,...a,ref:s})})});pe.displayName=M;var ue="AccordionContent",me=g.forwardRef((t,s)=>{const{__scopeAccordion:o,...a}=t,i=T(j,o),c=G(ue,o),l=z(o);return e.jsx(Je,{role:"region","aria-labelledby":c.triggerId,"data-orientation":i.orientation,...l,...a,ref:s,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});me.displayName=ue;function xe(t){return t?"open":"closed"}var at=ae,rt=ce,nt=de,fe=pe,he=me;const it=at,ge=u.forwardRef(({className:t,...s},o)=>e.jsx(rt,{ref:o,className:q("border-b",t),...s}));ge.displayName="AccordionItem";const be=u.forwardRef(({className:t,children:s,...o},a)=>e.jsx(nt,{className:"flex",children:e.jsxs(fe,{ref:a,className:q("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...o,children:[s,e.jsx(Ie,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));be.displayName=fe.displayName;const ve=u.forwardRef(({className:t,children:s,...o},a)=>e.jsx(he,{ref:a,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...o,children:e.jsx("div",{className:q("pb-4 pt-0",t),children:s})}));ve.displayName=he.displayName;const ct=async t=>{try{console.log("Sending ticket data:",JSON.stringify(t,null,2));const s=await fetch("/api/tickets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});if(!s.ok){const o=await s.text();console.error("API error:",s.status,o);let a=`Server responded with status: ${s.status}`;try{const i=JSON.parse(o);i.message&&(a=i.message)}catch{o&&(a=o)}throw new Error(a)}return await s.json()}catch(s){throw console.error("Error creating ticket:",s),s}};function lt({service:t}){const[s,o]=u.useState({}),{user:a,isLoading:i}=Re(),[c,l]=Se(),{toast:d}=Pe(),[p,m]=u.useState(!1),[f,x]=u.useState(!1),w=ke(),b=()=>{l("/")},N=()=>{if(a)x(!0);else{const r=`/service/${t.id}`;l(`/auth?returnUrl=${encodeURIComponent(r)}`)}},v=()=>{var r;(r=t.contactInfo)!=null&&r.phone?window.location.href=`tel:${t.contactInfo.phone}`:d({title:"Contact Information Not Available",description:"Phone number is not available for this service. Please try another contact method.",variant:"destructive"})},C=async()=>{if(!a){d({title:"Error",description:"You must be logged in to apply for a service.",variant:"destructive"});return}m(!0),x(!1);try{const r={title:`${t.title} Service Request`,description:`Request for ${t.title} service.`,serviceId:t.id,serviceName:t.title,userId:a.id,status:"new",priority:"medium"};await ct(r),await w.invalidateQueries({queryKey:["/api/tickets"]}),d({title:"Success!",description:"Application submitted successfully!"}),l("/tickets")}catch(r){console.error("Error details:",r);let n="Failed to submit application. Please try again.";try{if(r instanceof Error)if(r.message.includes("{")&&r.message.includes("}")){const h=JSON.parse(r.message);n=h.message||h.error||r.message}else n=r.message}catch{n=r instanceof Error?r.message:n}d({title:"Error Creating Ticket",description:n,variant:"destructive"}),console.error("Error creating ticket:",{originalError:r,parsedMessage:n})}finally{m(!1)}};return u.useEffect(()=>{const r=()=>{const n=document.querySelector("footer");if(n){const h=n.getBoundingClientRect(),y=window.innerHeight;if(h.top<y){const A=y-h.top;o({bottom:`${A+16}px`})}else o({bottom:"4rem"})}};return window.addEventListener("scroll",r),r(),()=>{window.removeEventListener("scroll",r)}},[]),e.jsxs("div",{className:"container mx-auto px-4 py-8 bg-white relative",children:[e.jsxs(I,{variant:"ghost",className:"absolute top-4 left-4 flex items-center gap-2",onClick:b,children:[e.jsx(Ve,{className:"w-4 h-4"}),"Back"]}),e.jsxs("div",{className:"pb-32",children:[e.jsxs("div",{className:"mb-10 pt-12",children:[e.jsx("h1",{className:"text-4xl font-bold mb-6",children:t.title.charAt(0).toUpperCase()+t.title.slice(1)}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl leading-relaxed",children:t.description})]}),e.jsxs(Te,{defaultValue:"overview",className:"mb-10",children:[e.jsxs(Oe,{className:"grid w-full grid-cols-4",children:[e.jsx(k,{value:"overview",children:"Overview"}),e.jsx(k,{value:"process",children:"Process"}),e.jsx(k,{value:"documents",children:"Documents"}),e.jsx(k,{value:"faqs",children:"FAQs"})]}),e.jsxs(_,{value:"overview",className:"mt-6 space-y-6",children:[e.jsx(R,{children:e.jsxs(S,{className:"pt-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Features & Benefits"}),e.jsx("div",{className:"text-lg whitespace-pre-wrap",children:t.features})]})}),t.eligibility&&e.jsx(R,{children:e.jsxs(S,{className:"pt-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Eligibility"}),e.jsx("div",{className:"text-lg whitespace-pre-wrap",children:t.eligibility})]})})]}),e.jsx(_,{value:"process",className:"mt-6",children:e.jsx(R,{children:e.jsx(S,{className:"pt-6",children:t.process?e.jsx("div",{className:"space-y-8",children:t.process.map((r,n)=>e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-3",children:r.title}),e.jsx("div",{className:"text-lg whitespace-pre-wrap",children:r.steps})]},n))}):e.jsx("p",{className:"text-lg",children:"Process information is not available for this service."})})})}),e.jsx(_,{value:"documents",className:"mt-6",children:e.jsx(R,{children:e.jsx(S,{className:"pt-6",children:t.documents?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Required Documents"}),e.jsx("div",{className:"text-lg whitespace-pre-wrap",children:t.documents})]}):e.jsx("p",{className:"text-lg",children:"Document information is not available for this service."})})})}),e.jsx(_,{value:"faqs",className:"mt-6",children:e.jsx(R,{children:e.jsx(S,{className:"pt-6",children:t.faqs?e.jsx(it,{type:"single",collapsible:!0,className:"w-full",children:t.faqs.map((r,n)=>e.jsxs(ge,{value:`faq-${n}`,children:[e.jsx(be,{className:"text-lg font-medium text-left justify-start",children:r.question}),e.jsx(ve,{className:"text-base",children:r.answer})]},n))}):e.jsx("p",{className:"text-lg",children:"FAQs are not available for this service."})})})})]}),e.jsxs("div",{className:"mt-10",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Ready to Get Started?"}),e.jsxs("p",{className:"text-lg mb-6",children:["Our experts are ready to assist you with your ",t.title.charAt(0).toUpperCase()+t.title.slice(1).toLowerCase(),"."]})]})]}),e.jsx("div",{className:"fixed inset-x-0 bottom-0 bg-white border-t border-gray-200 py-4 px-4 md:px-0",style:{boxShadow:"0 -4px 6px -1px rgba(0, 0, 0, 0.1), 0 -2px 4px -1px rgba(0, 0, 0, 0.06)",zIndex:1e3},children:e.jsxs("div",{className:"container mx-auto max-w-lg flex gap-4",children:[e.jsx(I,{className:"flex-1 bg-primary hover:bg-primary/90 text-white font-semibold h-12",onClick:N,disabled:p,children:p?"Submitting...":"Apply Now"}),e.jsxs(I,{className:"flex-1 bg-blue-100 hover:bg-blue-200 text-blue-700 font-semibold h-12 flex items-center justify-center gap-2",onClick:v,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-blue-700",children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),"Consult"]})]})}),e.jsx(Le,{open:f,onOpenChange:x,children:e.jsxs(Me,{children:[e.jsxs($e,{children:[e.jsx(qe,{children:"Confirm Application"}),e.jsxs(He,{children:["Are you sure you want to apply for ",t.title,"?"]})]}),e.jsxs(Be,{className:"flex gap-2",children:[e.jsx(I,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(I,{onClick:C,disabled:p,children:p?"Submitting...":"Confirm"})]})]})})]})}function xt(){const s=_e().id;console.log("Service ID from URL:",s);const o=s?Ee(s):void 0;return console.log("Service data:",o),o?e.jsx(lt,{service:o}):e.jsx(De,{})}export{xt as default};
